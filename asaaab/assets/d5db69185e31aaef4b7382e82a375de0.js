(function(window,undefined){observer.subscribe("upload/complete",function(obj){page.product.variation.uploadedPhotoId=obj.info.uuid;page.product.variation.uploadedPhotoUrl=obj.info.cdnUrl;$(".js-portrait-upload-block .uploadcare-uploaded-image-container").remove();$(".js-portrait-upload-block .uploadcare-message").remove();$(".uploaded-evaluate").remove();$(".js-portrait-upload-block").append('<div class="uploadcare-uploaded-image-container"><img class="uploadcare-uploaded-image" src="'+obj.info.cdnUrl+'" /></div>');$(".js-portrait-upload-block").append('<div class="uploadcare-message">'+page.translations.imageUploaded+' <a href="#" js-action-click="controls-image-choose">'+page.translations.changeImage+'</a></div>');$(".js-evaluate-message").append('<div class="uploaded-evaluate">'+page.translations.imageEvaluate+'</div>');$(".js-portrait-upload-block").addClass('step-upload-complete');$(".js-evaluate-message").parent().append($(".js-evaluate-message"))});observer.subscribe("product/configuration/updated",function(obj){if(obj.key=="theme"||obj.key=="shape"||obj.key=="size"){var $img=$("#preview-image");var url=$img.data("loc");url+="ultrasound-";url+=page.product.variation.size.substr(0,page.product.variation.size.length-2)+"-";url+=page.product.variation.theme+"-";url+=page.product.variation.shape+".jpg";$img.attr("src",url)}
if(obj.key=="theme"){var activeOption=$("#theme-options > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active");activeOption.parents(".dropdown").find(".option-active").find("a").html(activeOption.html());var options=$("#theme-options-lg > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active")}
if(obj.key=="shape"){var activeOption=$("#shape-options > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active");activeOption.parents(".dropdown").find(".option-active").find("a").html(activeOption.html());var options=$("#shape-options-lg > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active")}})})(this)