(function(window,undefined){observer.subscribe("upload/complete",function(obj){page.product.variation.uploadedPhotoId=obj.info.uuid;page.product.variation.uploadedPhotoUrl=obj.info.cdnUrl;$(".js-portrait-upload-block .uploadcare-uploaded-image-container").remove();$(".js-portrait-upload-block .uploadcare-message").remove();$(".uploaded-evaluate").remove();$(".js-portrait-upload-block").append('<div class="uploadcare-uploaded-image-container"><img class="uploadcare-uploaded-image" src="'+obj.info.cdnUrl+'" /></div>');$(".js-portrait-upload-block").append('<div class="uploadcare-message">'+page.translations.imageUploaded+' <a href="#" js-action-click="controls-image-choose">'+page.translations.changeImage+'</a></div>');$(".js-evaluate-message").append('<div class="uploaded-evaluate">'+page.translations.imageEvaluate+'</div>');$(".js-portrait-upload-block").addClass('step-upload-complete');$(".js-evaluate-message").parent().append($(".js-evaluate-message"))});observer.subscribe("product/configuration/updated",function(obj){if(obj.key=="theme"||obj.key=="size"){var slide=2;if(page.product.variation.size=="20x25cm"){slide+=1}else if(page.product.variation.size=="30x46cm"||page.product.variation.size=="30x40cm"){slide+=2}else if(page.product.variation.size=="41x61cm"||page.product.variation.size=="40x50cm"){slide+=3}
if(page.product.variation.theme=="in_color"){slide+=3}
observer.publish("carousel/slide/goto",{$target:obj.$target,slide:slide})}
if(obj.key=="theme"){var activeOption=$("#theme-options > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active");activeOption.parents(".dropdown").find(".option-active").find("a").html(activeOption.html());var options=$("#theme-options-lg > a").removeClass("active").filter('[data-value="'+obj.value+'"]').addClass("active")}
if(obj.key=="material"){$(".step-size").not(".js-step-size-"+obj.value).addClass("hidden");$(".js-step-size-"+obj.value).removeClass("hidden");if(obj.value=="fap"){if(page.product.variation.size=="20x25cm")newSelectedRow="20x25cm";else if(page.product.variation.size=="30x46cm"||page.product.variation.size=="30x40cm")newSelectedRow="30x40cm";else if(page.product.variation.size=="41x61cm"||page.product.variation.size=="40x50cm")newSelectedRow="40x50cm";$(".js-step-size-fap").find(".unit").each(function(){if($(this).data("value")==newSelectedRow){$(this).addClass("active");$(this).trigger("click")}});$(".js-step-size-canvas").addClass("hidden");$(".js-step-size-fap").removeClass("hidden")}else if(obj.value=="canvas"){if(page.product.variation.size=="20x25cm")newSelectedRow="20x25cm";else if(page.product.variation.size=="30x46cm"||page.product.variation.size=="30x40cm")newSelectedRow="30x46cm";else if(page.product.variation.size=="41x61cm"||page.product.variation.size=="40x50cm")newSelectedRow="41x61cm";$(".js-step-size-canvas").find(".unit").each(function(){if($(this).data("value")==newSelectedRow){$(this).addClass("active");$(this).trigger("click")}});$(".js-step-size-fap").addClass("hidden");$(".js-step-size-canvas").removeClass("hidden")}}})})(this)