(function(window,undefined){"use strict";var ConvertDDToDMS=function(D,lng){var response={"raw":D,"dir":D<0?lng?'W':'S':lng?'E':'N',"deg":0|(D<0?D=-D:D),"min":0|D%1*60,"sec":parseInt((0|D*60%1*6000)/100)};if(D<0){response.formated=(-D).toFixed(3)+"°"+response.dir}else{response.formated=D.toFixed(3)+"°"+response.dir}
response.formatedGps=response.deg+"° "+response.min+"' "+response.sec+'" '+response.dir;return response}
var getDetails=function(location,update=!0){$.ajax({url:"/place-details",data:{key:location,language:page.language},success:function(data){if(!data.result.geometry){window.alert("No details available for input: '"+data.result.name+"'");return}
var latitudeConverted=ConvertDDToDMS(data.result.geometry.location.lat);var longitudeConverted=ConvertDDToDMS(data.result.geometry.location.lng,!0);if(update)
page.product.variation.labelLocation=location;page.product.variation.latDeg=latitudeConverted.deg;page.product.variation.latDir=latitudeConverted.dir;page.product.variation.latMin=latitudeConverted.min;page.product.variation.latSec=latitudeConverted.sec;page.product.variation.lonDeg=longitudeConverted.deg;page.product.variation.lonDir=longitudeConverted.dir;page.product.variation.lonMin=longitudeConverted.min;page.product.variation.lonSec=longitudeConverted.sec;page.product.variation.labelLocationInfo=data.result.name;$(".location-label").html(page.product.variation.labelLocationInfo);if(update){page.product.variation.labelOne=data.result.name;$('[data-key="labelOne"]').val(data.result.name)}else{$("#labels-container").removeClass("hidden")}
observer.publish("labels/change")},dataType:"json"})}
observer.subscribe("page/loaded",function(){if(page.product.variation.labelLocationInfo==""){getDetails(page.product.variation.labelLocation,!1)}else{$(".location-label").html(page.product.variation.labelLocationInfo);$("#labels-container").removeClass("hidden")}});observer.subscribe("product/configuration/updated",function(obj){if(obj.key=="labelLocation"){getDetails(obj.value)}})})(this)